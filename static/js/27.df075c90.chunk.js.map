{"version":3,"sources":["components/pagecomponents/TitleText.tsx","models/Billings.ts","components/pagecomponents/TitleBar.tsx","i18n/LocalizedDate.tsx","components/resources/ResourcesViewTable.tsx","components/resources/ResourcesModalLink.tsx","../node_modules/antd/es/divider/style/index.js","../node_modules/antd/es/divider/index.js","components/ModalLink.tsx","models/Resources.ts","components/billings/HistoryBillingsTable.tsx","components/Flexbox.tsx","../node_modules/@ant-design/icons-svg/es/asn/StepBackwardOutlined.js","../node_modules/@ant-design/icons/es/icons/StepBackwardOutlined.js","components/billings/HistoryBillingsPage.tsx","components/billings/CurrentBillingsTable.tsx","components/billings/CurrentBillingsPage.tsx","pages/Expenses/Billing/Projects/Used.tsx"],"names":["Title","styled","h1","TitleText","children","BillType","BillSubjectType","TitleBar","div","spaceBetween","LocalizedDate","dateTimeString","dayjs","format","Column","root","lang","components","resources","ResourcesViewTable","props","pagination","hideOnSinglePage","dataSource","Object","entries","rowKey","title","id","resourceType","dataIndex","render","ty","values","ResourcesModalLink","ModalLink","modalTitle","modalContent","resourcesString","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","__rest","s","e","t","p","indexOf","getOwnPropertySymbols","propertyIsEnumerable","Divider","React","ConfigConsumer","_ref","_classNames","getPrefixCls","customizePrefixCls","prefixCls","_props$type","type","_props$orientation","orientation","className","dashed","restProps","orientationPrefix","concat","classString","classNames","role","useModal","api","contextHolder","onClick","info","icon","content","cpu","memory","storage","ZeroResources","minus","op1","op2","billings","table","HistoryBillingsTable","data","loading","startTime","time","endTime","quota","amount","toFixed","Allocated","payer","_","item","overlay","payerId","payerName","FlexBox","StepBackwardOutlined","ref","createElement","AntdIcon","StepBackwardOutlinedSvg","displayName","forwardRef","HistoryBillingsPage","getData","billType","subjectType","location","name","search","replace","promiseFn","useCallback","useAsync","isPending","reload","to","history","replacements","ClickableA","refresh","CurrentBillingsTable","subjectId","subjectName","User","UserProjectAssignment","nextDue","date","actions","historyLink","CurrentBillingsPage","processedData","useMemo","map","x","current","service","getApiService","BillingService","getProjects","getCurrentUsedBillings","Project","then","ProjectsUsed","Used","getProjectHistoryData","a","getHistoryUsedBillings","resp","HistoryProjectUsed","projectId","ProjectUsed","path"],"mappings":"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","file":"static/js/27.df075c90.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styled from 'styled-components';\r\n\r\nconst Title = styled.h1`\r\n  font-weight: 700;\r\n  font-size: 16px;\r\n`;\r\n\r\nexport const TitleText: React.FC = ({ children }) => {\r\n  return (\r\n    <Title>{children}</Title>\r\n  );\r\n}\r\n\r\n","import { Resources } from './Resources';\r\n\r\nexport interface CurrentUsedBilling {\r\n  subjectId: string;\r\n  subjectName: string;\r\n  resources: Resources;\r\n  amount: number;\r\n  nextDue: string;\r\n}\r\n\r\nexport interface CurrentAllocatedBilling extends CurrentUsedBilling {\r\n  payerId: string;\r\n  payerName: string;\r\n}\r\n\r\nexport interface HistoryUsedBilling {\r\n  id: string;\r\n  resources: Resources;\r\n  amount: number;\r\n  startTime: string;\r\n  endTime: string;\r\n}\r\n\r\nexport interface HistoryAllocatedBilling extends HistoryUsedBilling {\r\n  payerId: string;\r\n  payerName: string;\r\n}\r\n\r\nexport enum BillType {\r\n  Allocated= \"Allocated\",\r\n  Used = \"Used\",\r\n}\r\n\r\nexport enum BillSubjectType {\r\n  System = \"System\",\r\n  Domain = \"Domain\",\r\n  Project = \"Project\",\r\n  User = \"User\",\r\n  UserProjectAssignment = \"UserProjectAssignment\",\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\ninterface Props {\r\n  spaceBetween?: boolean;\r\n}\r\n\r\nexport const TitleBar = styled.div<Props>`\r\n  margin: 8px 0;\r\n\r\n  ${({spaceBetween = false}) => !spaceBetween ? \"\" : `\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  `}\r\n`;\r\n\r\n","import React, { useMemo } from \"react\";\r\nimport { useStore } from 'simstate';\r\nimport { I18nStore } from '.';\r\nimport dayjs from \"dayjs\";\r\n\r\ninterface Props {\r\n  dateTimeString: string;\r\n}\r\n\r\nexport const LocalizedDate: React.FC<Props> = ({ dateTimeString }) => {\r\n\r\n  return (\r\n    <>\r\n      {dayjs(dateTimeString).format(\"YYYY-MM-DD HH:mm:ss\")}\r\n    </>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { Resources } from \"src/models/Resources\";\r\nimport { Table } from \"antd\";\r\nimport { Localized, lang } from \"src/i18n\";\r\n\r\nconst { Column } = Table;\r\n\r\ninterface Props {\r\n  resources: Resources;\r\n}\r\n\r\nconst root = lang.components.resources;\r\n\r\nexport const ResourcesViewTable: React.FC<Props> = (props) => {\r\n\r\n  return (\r\n    <Table pagination={{ hideOnSinglePage: true }} dataSource={Object.entries(props.resources)} rowKey=\"0\">\r\n      <Column title={<Localized id={root.resourceType} />} dataIndex={0}\r\n        render={(ty) => <Localized id={root[ty]} />} />\r\n      <Column title={<Localized id={root.values} />} dataIndex={1} />\r\n    </Table>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Resources, resourcesString } from \"src/models/Resources\";\r\nimport { ModalLink } from \"src/components/ModalLink\";\r\nimport { ResourcesViewTable } from \"src/components/resources/ResourcesViewTable\";\r\nimport { Localized, lang } from \"src/i18n\";\r\n\r\ninterface Props {\r\n  resources: Resources;\r\n}\r\n\r\nconst root = lang.components.resources;\r\n\r\nexport const ResourcesModalLink: React.FC<Props> = ({ resources }) => {\r\n  return (\r\n    <ModalLink modalTitle={<Localized id={root.modalTitle} />} modalContent={<ResourcesViewTable resources={resources} />}>\r\n      {resourcesString(resources)}\r\n    </ModalLink>\r\n  )\r\n\r\n}\r\n","import '../../style/index.less';\nimport './index.less';","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\n\nvar Divider = function Divider(props) {\n  return React.createElement(ConfigConsumer, null, function (_ref) {\n    var _classNames;\n\n    var getPrefixCls = _ref.getPrefixCls;\n\n    var customizePrefixCls = props.prefixCls,\n        _props$type = props.type,\n        type = _props$type === void 0 ? 'horizontal' : _props$type,\n        _props$orientation = props.orientation,\n        orientation = _props$orientation === void 0 ? 'center' : _props$orientation,\n        className = props.className,\n        children = props.children,\n        dashed = props.dashed,\n        restProps = __rest(props, [\"prefixCls\", \"type\", \"orientation\", \"className\", \"children\", \"dashed\"]);\n\n    var prefixCls = getPrefixCls('divider', customizePrefixCls);\n    var orientationPrefix = orientation.length > 0 ? \"-\".concat(orientation) : orientation;\n    var classString = classNames(className, prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-text\").concat(orientationPrefix), children), _defineProperty(_classNames, \"\".concat(prefixCls, \"-dashed\"), !!dashed), _classNames));\n    return React.createElement(\"div\", _extends({\n      className: classString\n    }, restProps, {\n      role: \"separator\"\n    }), children && React.createElement(\"span\", {\n      className: \"\".concat(prefixCls, \"-inner-text\")\n    }, children));\n  });\n};\n\nexport default Divider;","import React from \"react\";\r\nimport { TitleText } from \"src/components/pagecomponents/TitleText\";\r\nimport { Modal } from \"antd\";\r\n\r\nexport const ModalLink: React.FC<{\r\n  modalTitle: React.ReactNode;\r\n  modalContent: React.ReactNode;\r\n}> = ({ children, modalTitle, modalContent }) => {\r\n\r\n  const [api, contextHolder] = Modal.useModal();\r\n\r\n  return (\r\n    <>\r\n      {contextHolder}\r\n      <a onClick={() => api.info({\r\n        icon: null,\r\n        title: <TitleText>{modalTitle}</TitleText>,\r\n        content: modalContent\r\n      })}>\r\n        {children}\r\n      </a>\r\n    </>\r\n  );\r\n}\r\n","export interface Resources {\r\n  cpu: number;\r\n  memory: number;\r\n  storage: number;\r\n}\r\n\r\nexport function resourcesString({ cpu, memory, storage }: Resources) {\r\n  return `${cpu} | ${memory} MB | ${storage} GB`;\r\n}\r\n\r\nexport const ZeroResources = {\r\n  cpu: 0,\r\n  memory: 0,\r\n  storage: 0,\r\n};\r\n\r\nexport function minus(op1: Resources, op2: Resources) {\r\n  return { cpu: op1.cpu - op2.cpu, memory: op1.memory - op2.memory, storage: op1.storage - op2.storage };\r\n}\r\n","import React from \"react\";\r\nimport { Table, Tooltip } from \"antd\";\r\nimport { ResourcesModalLink } from \"src/components/resources/ResourcesModalLink\";\r\nimport { Resources } from \"src/models/Resources\";\r\nimport { LocalizedDate } from \"src/i18n/LocalizedDate\";\r\nimport { lang, Localized } from \"src/i18n\";\r\nimport { BillType, HistoryAllocatedBilling, HistoryUsedBilling } from \"src/models/Billings\";\r\n\r\nconst root = lang.components.billings.table;\r\n\r\ninterface Props {\r\n  data: (HistoryAllocatedBilling | HistoryUsedBilling)[] | undefined;\r\n  loading?: boolean;\r\n  type: BillType;\r\n}\r\n\r\nexport const HistoryBillingsTable: React.FC<Props> = ({ data, type, loading }) => {\r\n  return (\r\n    <Table dataSource={data} loading={loading} rowKey=\"id\">\r\n      <Table.Column title={<Localized id={root.startTime} />} dataIndex=\"startTime\"\r\n        render={(time: string) => <LocalizedDate dateTimeString={time} />} />\r\n      <Table.Column title={<Localized id={root.endTime} />} dataIndex=\"endTime\"\r\n        render={(time: string) => <LocalizedDate dateTimeString={time} />} />\r\n      <Table.Column title={<Localized id={root.quota} />} dataIndex=\"resources\"\r\n        render={(resources: Resources) => <ResourcesModalLink resources={resources} />} />\r\n      <Table.Column title={<Localized id={root.amount} />} dataIndex=\"amount\"\r\n        render={(amount: number) => amount.toFixed(2)} />\r\n      {type === BillType.Allocated ? (\r\n        <Table.Column title={<Localized id={root.payer} />} dataIndex=\"payerName\"\r\n          render={(_, item: HistoryAllocatedBilling) => <Tooltip overlay={item.payerId}><span>{item.payerName}</span></Tooltip>} />\r\n      ) : null}\r\n    </Table>\r\n  )\r\n}\r\n","import styled from 'styled-components';\r\n\r\nexport const FlexBox = styled.div`\r\n  display: flex;\r\n`;\r\n","// This icon file is generated automatically.\n// tslint:disable\nvar StepBackwardOutlined = { \"name\": \"step-backward\", \"theme\": \"outlined\", \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M347.6 528.95l383.2 301.02c14.25 11.2 35.2 1.1 35.2-16.95V210.97c0-18.05-20.95-28.14-35.2-16.94L347.6 495.05a21.53 21.53 0 000 33.9M330 864h-64a8 8 0 01-8-8V168a8 8 0 018-8h64a8 8 0 018 8v688a8 8 0 01-8 8\" } }] } };\nexport default StepBackwardOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport React from 'react';\nimport StepBackwardOutlinedSvg from \"@ant-design/icons-svg/es/asn/StepBackwardOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar StepBackwardOutlined = function StepBackwardOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: StepBackwardOutlinedSvg\n  }));\n};\n\nStepBackwardOutlined.displayName = 'StepBackwardOutlined';\nexport default React.forwardRef(StepBackwardOutlined);","import React, { useCallback } from \"react\";\r\nimport { TitleText } from \"src/components/pagecomponents/TitleText\";\r\nimport { TitleBar } from \"src/components/pagecomponents/TitleBar\";\r\nimport { Localized, lang, RecursiveLocalized } from \"src/i18n\";\r\nimport { ClickableA } from \"src/components/ClickableA\";\r\nimport { RouteComponentProps, Link } from \"@reach/router\";\r\nimport { StepBackwardOutlined } from \"@ant-design/icons\";\r\nimport { Button, Divider } from \"antd\";\r\nimport { HistoryBillingsTable } from \"src/components/billings/HistoryBillingsTable\";\r\nimport { useAsync } from \"react-async\";\r\nimport { FlexBox } from \"src/components/Flexbox\";\r\nimport {\r\n  BillSubjectType,\r\n  BillType,\r\n  HistoryAllocatedBilling, HistoryUsedBilling\r\n} from \"../../models/Billings\";\r\n\r\ntype Billing = HistoryUsedBilling | HistoryAllocatedBilling;\r\n\r\ninterface Props {\r\n  billType: BillType;\r\n  id: string;\r\n  subjectType: BillSubjectType;\r\n  getData: (id: string) => Promise<Billing[]>;\r\n  location: Location;\r\n}\r\n\r\nconst root = lang.components.billings;\r\n\r\nexport const HistoryBillingsPage: React.FC<Props> = ({ getData, id, billType, subjectType, location }) => {\r\n\r\n  // just parse the first arg and use it as the name\r\n  const name = location?.search?.replace?.(/^.*?=/, '') as string;\r\n\r\n  const promiseFn = useCallback(() => (\r\n    getData(id)\r\n  ), [getData, id]);\r\n\r\n  const { data, isPending, reload } = useAsync({ promiseFn });\r\n\r\n  return (\r\n    <div>\r\n      <TitleBar spaceBetween={true}>\r\n        <FlexBox>\r\n          <TitleText>\r\n            <Button>\r\n              <Link to=\"..\"><StepBackwardOutlined /></Link>\r\n            </Button>\r\n            <Divider type=\"vertical\" />\r\n            <Localized id={root.history} replacements={[\r\n              <Localized key={\"subjectType\"} id={root.subjectType[subjectType]} />,\r\n              name || id,\r\n              <Localized key=\"billType\" id={root[billType]} />\r\n            ]} />\r\n          </TitleText>\r\n        </FlexBox>\r\n        <ClickableA onClick={reload}><Localized id={root.refresh} /></ClickableA>\r\n      </TitleBar>\r\n      <HistoryBillingsTable type={billType} data={data} loading={isPending} />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Resources } from 'src/models/Resources';\r\nimport { Table, Tooltip } from 'antd';\r\nimport { Link } from \"@reach/router\";\r\nimport { lang, Localized } from \"src/i18n\";\r\nimport { LocalizedDate } from \"src/i18n/LocalizedDate\";\r\nimport { ResourcesModalLink } from \"src/components/resources/ResourcesModalLink\";\r\nimport { BillType, CurrentUsedBilling, BillSubjectType } from \"src/models/Billings\";\r\n\r\nconst root = lang.components.billings;\r\n\r\ninterface AllocatedDataItem extends CurrentUsedBilling {\r\n  historyLink: string;\r\n  payerId?: string;\r\n  payerName?: string;\r\n}\r\n\r\ninterface Props {\r\n  subjectType: BillSubjectType;\r\n  type: BillType;\r\n  data: AllocatedDataItem[] | undefined;\r\n  loading?: boolean;\r\n}\r\n\r\nexport const CurrentBillingsTable: React.FC<Props> = ({ subjectType, type, data, loading }) => {\r\n  return (\r\n    <Table dataSource={data} loading={loading} rowKey=\"subjectName\">\r\n      <Table.Column title={<Localized id={root.subjectType[subjectType]} />} dataIndex=\"subject\"\r\n        render={(_, item: AllocatedDataItem) => (\r\n          <Tooltip overlay={item.subjectId}>\r\n            <span>{item.subjectName}</span>\r\n          </Tooltip>\r\n        )} />\r\n      <Table.Column title={<Localized id={type == BillType.Allocated ? root.table.quota : root.table.resources} />} dataIndex=\"resources\"\r\n        render={(resources: Resources) => <ResourcesModalLink resources={resources} />} />\r\n      <Table.Column title={<Localized id={root.table.amount} />} dataIndex=\"amount\"\r\n        render={(amount: number) => amount.toFixed(2)} />\r\n      {(type === BillType.Allocated && subjectType !== BillSubjectType.User && subjectType !== BillSubjectType.UserProjectAssignment) ? (\r\n        <Table.Column title={<Localized id={root.table.payer} />} dataIndex=\"payerName\"\r\n          render={(_, item: AllocatedDataItem) => <Tooltip overlay={item.payerId}><span>{item.payerName}</span></Tooltip>} />\r\n      ) : null}\r\n      <Table.Column title={<Localized id={root.table.nextDue} />} dataIndex=\"nextDue\" render={(date: string) => <LocalizedDate dateTimeString={date} />} />\r\n      <Table.Column title={<Localized id={root.table.actions} />} dataIndex=\"subject\"\r\n        render={(_, item: AllocatedDataItem) => (\r\n          <Link to={item.historyLink}>\r\n            <Localized id={root.table.history} />\r\n          </Link>\r\n        )} />\r\n    </Table>\r\n  )\r\n}\r\n","import React, { useMemo } from \"react\";\r\nimport { TitleText } from \"src/components/pagecomponents/TitleText\";\r\nimport { TitleBar } from \"src/components/pagecomponents/TitleBar\";\r\nimport { Localized, lang, RecursiveLocalized } from \"src/i18n\";\r\nimport { ClickableA } from \"src/components/ClickableA\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { useAsync } from \"react-async\";\r\nimport { CurrentBillingsTable } from \"src/components/billings/CurrentBillingsTable\";\r\nimport { BillSubjectType, BillType, CurrentAllocatedBilling, CurrentUsedBilling } from \"../../models/Billings\";\r\n\r\nconst root = lang.components.billings;\r\n\r\ntype Billing = CurrentUsedBilling | CurrentAllocatedBilling;\r\n\r\ninterface Props extends RouteComponentProps {\r\n  subjectType: BillSubjectType;\r\n  billType: BillType;\r\n  promiseFn: () => Promise<Billing[]>;\r\n}\r\n\r\nexport const CurrentBillingsPage: React.FC<Props> = ({ promiseFn, subjectType, billType }) => {\r\n\r\n  const { data, isPending, reload } = useAsync({ promiseFn });\r\n\r\n  const processedData = useMemo(() => {\r\n    return data?.map(x => ({ ...x, historyLink: `./${x.subjectId}?name=${x.subjectName}` }))\r\n  }, [data])\r\n\r\n  return (\r\n    <div>\r\n      <TitleBar spaceBetween={true}>\r\n        <TitleText>\r\n          <Localized id={root.current} replacements={[\r\n            <Localized key={\"subjectType\"} id={root.subjectType[subjectType]}/>,\r\n            <Localized key=\"billType\" id={root[billType]}/>\r\n          ]}/>\r\n        </TitleText>\r\n        <ClickableA onClick={reload}><Localized id={root.refresh}/></ClickableA>\r\n      </TitleBar>\r\n      <CurrentBillingsTable subjectType={subjectType} type={billType} data={processedData} loading={isPending}/>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Router, RouteComponentProps } from \"@reach/router\";\r\nimport { BillSubjectType, BillType } from 'src/models/Billings';\r\nimport { HistoryBillingsPage } from \"src/components/billings/HistoryBillingsPage\";\r\nimport { getApiService } from \"src/apis\";\r\nimport { BillingService } from \"src/apis/expenses/BillingService\";\r\nimport { CurrentBillingsPage } from \"src/components/billings/CurrentBillingsPage\";\r\n\r\nconst service = getApiService(BillingService);\r\n\r\nconst getProjects = () => service.getCurrentUsedBillings(BillSubjectType.Project).then(x => x.billings);\r\n\r\nconst ProjectsUsed: React.FC<RouteComponentProps> = () => {\r\n  return (\r\n    <CurrentBillingsPage\r\n      subjectType={BillSubjectType.Project}\r\n      billType={BillType.Used}\r\n      promiseFn={getProjects} />\r\n  );\r\n}\r\nconst getProjectHistoryData = async (id: string) => {\r\n  const resp = await service.getHistoryUsedBillings(BillSubjectType.Project, id);\r\n  return resp.billings;\r\n};\r\n\r\nconst HistoryProjectUsed: React.FC<RouteComponentProps<{ projectId: string }>> = ({ projectId, location }) => {\r\n  return (\r\n    <HistoryBillingsPage id={projectId!!} billType={BillType.Used} subjectType={BillSubjectType.Project} getData={getProjectHistoryData} location={location!!} />\r\n  );\r\n}\r\n\r\nexport default function ProjectUsed() {\r\n  return (\r\n    <Router>\r\n      <ProjectsUsed path=\"/\" />\r\n      <HistoryProjectUsed path=\":projectId\" />\r\n    </Router>\r\n  )\r\n}\r\n"],"sourceRoot":""}