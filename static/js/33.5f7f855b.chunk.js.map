{"version":3,"sources":["components/pagecomponents/TitleText.tsx","components/pagecomponents/TitleBar.tsx","i18n/LocalizedDate.tsx","utils/refreshToken.ts","i18n/TransactionTypeText.tsx","components/transactions/AccountTransactionTable.tsx","pages/Expenses/Transactions/Account/Table.tsx","pages/Expenses/Transactions/Account/index.tsx"],"names":["Title","styled","h1","TitleText","children","TitleBar","div","spaceBetween","LocalizedDate","dateTimeString","dayjs","format","useRefreshToken","useState","refreshToken","setRefreshToken","useCallback","original","root","lang","components","transactions","type","TransactionTypeText","id","account","timeSorter","a","b","isBefore","AccountTransactionTable","data","loading","pagination","hideOnSinglePage","dataSource","rowKey","Column","title","time","dataIndex","sorter","defaultSortOrder","render","amount","toFixed","reason","service","getApiService","TransactionsService","getAccountTransactions","then","x","Table","useAsync","promiseFn","watch","isPending","expenses","accountTransactions","Transactions","props","token","refresh","ClickableA","onClick"],"mappings":"uIAAA,sDAGMA,EAHN,OAGcC,EAAOC,GAAV,uEAAGD,CAAH,qCAKEE,EAAsB,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACpC,OACE,kBAACJ,EAAD,KAAQI,K,iCCTZ,sCAMaC,EANb,OAMwBJ,EAAOK,IAAV,2DAAGL,CAAH,sBAGjB,oBAAEM,aAAF,qBAA4B,0FAAgB,O,iCCVhD,wEASaC,EAAiC,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,eAE/C,OACE,oCACGC,IAAMD,GAAgBE,OAAO,0B,sFCX7B,SAASC,IAAmB,IAAD,EACQC,oBAAS,GADjB,mBACzBC,EADyB,KACXC,EADW,KAKhC,MAAO,CAACD,EAFmBE,uBAAY,kBAAMD,GAAgB,SAACE,GAAD,OAAeA,OAAW,O,iCCLzF,8DAIMC,EAAOC,IAAKC,WAAWC,aAAaC,KAM7BC,EAAuC,SAAC,GAAc,IAAZD,EAAW,EAAXA,KACrD,OAAO,kBAAC,IAAD,CAAWE,GAAIN,EAAKI,O,mJCGvBJ,EAAOC,IAAKC,WAAWC,aAAaI,QAEpCC,EAAa,SAACC,EAAWC,GAAZ,OAA0BlB,IAAMiB,GAAGE,SAASnB,IAAMkB,IAAM,GAAK,GAEnEE,EAA2C,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,KAA4B,IAAtBC,eAAsB,SAErF,OACE,uBAAOC,WAAY,CAAEC,kBAAkB,GAAQF,QAASA,EAASG,WAAYJ,EAAMK,OAAO,MACxF,sBAAOC,OAAP,CAAcC,MAAO,kBAAC,IAAD,CAAWd,GAAIN,EAAKqB,OAAUC,UAAU,OAC3DC,OAAQf,EACRgB,iBAAiB,UACjBC,OAAQ,SAACJ,GAAD,OAAkB,kBAAC,IAAD,CAAe9B,eAAgB8B,OAE3D,sBAAOF,OAAP,CAAcC,MAAO,kBAAC,IAAD,CAAWd,GAAIN,EAAK0B,SAAYJ,UAAU,SAC7DG,OAAQ,SAACC,GAAD,OAAoBA,EAAOC,QAAQ,MAE7C,sBAAOR,OAAP,CAAcC,MAAO,kBAAC,IAAD,CAAWd,GAAIN,EAAK4B,SAAYN,UAAU,SAC7DG,OAAQ,SAACG,GAAD,OACN,kBAAC,IAAD,CAAqBxB,KAAMwB,EAAOxB,a,+LCzBtCyB,EAAUC,YAAcC,KAExBC,EAAyB,kBAAMH,EAAQG,yBAAyBC,MAAK,SAACC,GAAD,OAAOA,EAAE/B,iBAMvEgC,EAAyB,SAAC,GAAsB,IAApBvC,EAAmB,EAAnBA,aAAmB,EAC9BwC,YAAS,CAAEC,UAAWL,EAAwBM,MAAO1C,IAAzEiB,EADkD,EAClDA,KAAM0B,EAD4C,EAC5CA,UAEd,OAAO,kBAAC3B,EAAA,EAAD,CAAyBC,KAAMA,EAAMC,QAASyB,KCTjDvC,EAAOC,IAAKuC,SAASC,oBAEdC,EAA8C,SAACC,GAAW,IAAD,EAE3CjD,cAF2C,mBAE7DkD,EAF6D,KAEtDC,EAFsD,KAIpE,OACE,6BACE,kBAAC1D,EAAA,EAAD,CAAUE,cAAc,GACtB,kBAACJ,EAAA,EAAD,KAAW,kBAAC,IAAD,CAAWqB,GAAIN,EAAKoB,SAC/B,kBAAC0B,EAAA,EAAD,CAAYC,QAASF,GAAS,kBAAC,IAAD,CAAWvC,GAAIN,EAAK6C,YAEpD,kBAAC,EAAD,CAAOjD,aAAcgD,MAMZF","file":"static/js/33.5f7f855b.chunk.js","sourcesContent":["import React from \"react\";\r\nimport styled from 'styled-components';\r\n\r\nconst Title = styled.h1`\r\n  font-weight: 700;\r\n  font-size: 16px;\r\n`;\r\n\r\nexport const TitleText: React.FC = ({ children }) => {\r\n  return (\r\n    <Title>{children}</Title>\r\n  );\r\n}\r\n\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\ninterface Props {\r\n  spaceBetween?: boolean;\r\n}\r\n\r\nexport const TitleBar = styled.div<Props>`\r\n  margin: 8px 0;\r\n\r\n  ${({spaceBetween = false}) => !spaceBetween ? \"\" : `\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n  `}\r\n`;\r\n\r\n","import React, { useMemo } from \"react\";\r\nimport { useStore } from 'simstate';\r\nimport { I18nStore } from '.';\r\nimport dayjs from \"dayjs\";\r\n\r\ninterface Props {\r\n  dateTimeString: string;\r\n}\r\n\r\nexport const LocalizedDate: React.FC<Props> = ({ dateTimeString }) => {\r\n\r\n  return (\r\n    <>\r\n      {dayjs(dateTimeString).format(\"YYYY-MM-DD HH:mm:ss\")}\r\n    </>\r\n  )\r\n}\r\n","import { useState, useCallback } from \"react\";\r\n\r\nexport function useRefreshToken() {\r\n  const [refreshToken, setRefreshToken] = useState(false);\r\n\r\n  const updateRefreshToken = useCallback(() => setRefreshToken((original) => !original), []);\r\n\r\n  return [refreshToken, updateRefreshToken] as const;\r\n}\r\n\r\nexport interface Refreshable {\r\n  refreshToken: boolean;\r\n}\r\n","import React from \"react\";\r\nimport { TransactionType } from 'src/models/TransactionReason';\r\nimport { lang, Localized } from \"src/i18n\";\r\n\r\nconst root = lang.components.transactions.type;\r\n\r\ninterface Props {\r\n  type: TransactionType;\r\n}\r\n\r\nexport const TransactionTypeText: React.FC<Props> = ({ type }) => {\r\n  return <Localized id={root[type]} />\r\n}\r\n","import React from \"react\";\r\nimport { Table } from \"antd\";\r\nimport { lang, Localized } from \"src/i18n\";\r\nimport { TransactionTypeText } from \"src/i18n/TransactionTypeText\";\r\nimport { TransactionReason } from \"src/models/TransactionReason\";\r\nimport dayjs from \"dayjs\";\r\nimport { LocalizedDate } from \"src/i18n/LocalizedDate\";\r\nimport { AccountTransaction } from \"src/models/AccountTransaction\";\r\n\r\ninterface Props {\r\n  data: AccountTransaction[] | undefined;\r\n  loading?: boolean;\r\n}\r\n\r\nconst root = lang.components.transactions.account;\r\n\r\nconst timeSorter = (a: string, b: string) => dayjs(a).isBefore(dayjs(b)) ? 1 : -1;\r\n\r\nexport const AccountTransactionTable: React.FC<Props> = ({ data, loading = false }) => {\r\n\r\n  return (\r\n    <Table pagination={{ hideOnSinglePage: true }} loading={loading} dataSource={data} rowKey=\"id\">\r\n      <Table.Column title={<Localized id={root.time} />} dataIndex=\"time\"\r\n        sorter={timeSorter}\r\n        defaultSortOrder=\"descend\"\r\n        render={(time: string) => <LocalizedDate dateTimeString={time} />}\r\n      />\r\n      <Table.Column title={<Localized id={root.amount} />} dataIndex=\"amount\"\r\n        render={(amount: number) => amount.toFixed(2)}\r\n      />\r\n      <Table.Column title={<Localized id={root.reason} />} dataIndex=\"reason\"\r\n        render={(reason: TransactionReason) => (\r\n          <TransactionTypeText type={reason.type} />\r\n        )} />\r\n    </Table>\r\n  )\r\n}\r\n","import React from \"react\";\r\nimport { getApiService } from \"src/apis\";\r\nimport { AccountTransactionTable } from \"src/components/transactions/AccountTransactionTable\";\r\nimport { Spin } from \"antd\";\r\nimport { useAsync } from \"react-async\";\r\nimport { TransactionsService } from \"src/apis/expenses/TransactionsService\";\r\n\r\nconst service = getApiService(TransactionsService);\r\n\r\nconst getAccountTransactions = () => service.getAccountTransactions().then((x) => x.transactions);\r\n\r\ninterface Props {\r\n  refreshToken: any;\r\n}\r\n\r\nexport const Table: React.FC<Props> = ({ refreshToken }) => {\r\n  const { data, isPending } = useAsync({ promiseFn: getAccountTransactions, watch: refreshToken });\r\n\r\n  return <AccountTransactionTable data={data} loading={isPending} />;\r\n}\r\n\r\n\r\n","import React from \"react\";\r\nimport { RouteComponentProps } from \"@reach/router\";\r\nimport { TitleBar } from \"src/components/pagecomponents/TitleBar\";\r\nimport { TitleText } from \"src/components/pagecomponents/TitleText\";\r\nimport { lang, Localized } from \"src/i18n\";\r\nimport { useRefreshToken } from \"src/utils/refreshToken\";\r\nimport { ClickableA } from \"src/components/ClickableA\";\r\nimport { Table } from \"./Table\";\r\n\r\nconst root = lang.expenses.accountTransactions;\r\n\r\nexport const Transactions: React.FC<RouteComponentProps> = (props) => {\r\n\r\n  const [token, refresh] = useRefreshToken();\r\n\r\n  return (\r\n    <div>\r\n      <TitleBar spaceBetween={true}>\r\n        <TitleText><Localized id={root.title} /></TitleText>\r\n        <ClickableA onClick={refresh}><Localized id={root.refresh} /></ClickableA>\r\n      </TitleBar>\r\n      <Table refreshToken={token} />\r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default Transactions;\r\n"],"sourceRoot":""}