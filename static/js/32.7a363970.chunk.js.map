{"version":3,"sources":["components/ClickableA.tsx","utils/validateMessages.tsx","assets/logo-horizontal.svg","components/Footer/index.tsx","pages/Home/LanguageSelector.tsx","pages/Home/PageIndicator.tsx","pages/Home/HomePageLayout.tsx","utils/PageMetadata.tsx","pages/Home/Login/index.tsx","pages/Home/Register/index.tsx","pages/Home/index.tsx"],"names":["ClickableA","styled","a","root","lang","validateMessages","required","id","integer","number","email","module","exports","footer","dataSource","title","contact","content","github","website","linkedin","contentLink","moreProducts","chainstore","chainpaper","aplusquant","tagx00","lightx00","Footer","getLiChildren","data","i","links","map","item","ii","cItem","link","key","startsWith","to","href","target","rel","props","this","isMobile","liChildrenToRender","LogoContainer","src","logo","description","className","Date","getFullYear","copyright","madeWithLove","React","Component","defaultProps","div","HomepageLanguageSelector","useStore","I18nStore","currentLanguage","changeLanguage","trigger","overlay","selectedKeys","metadata","allLanguages","filter","x","Item","onClick","name","GlobalOutlined","DownOutlined","homepage","pageIndicator","PageIndicator","location","useLocation","Group","value","pathname","Button","navigate","login","register","Container","Center","RowCenter","Header","Content","FormSection","HomePageLayout","children","width","alt","FormButton","PageMetadata","titleId","rest","i18nStore","actualTitle","translate","titleStr","Helmet","loginForm","LoginForm","userStore","UserStore","availableScopesStore","AvailableScopesStore","notification","useNotification","api","contextHolder","useState","loggingIn","setLoggingIn","onFinish","values","username","password","accountService","getApiService","AuthenticationService","getScopes","scopesResp","scope","defaultScope","lastLoginScope","scopes","loginResponse","userId","token","remember","userActive","scopeActive","setScopes","error","message","loginFailTitle","other","useMultiLocalized","initialValues","rules","disabled","prefix","UserOutlined","placeholder","LockOutlined","type","valuePropName","noStyle","ForgotLink","forget","loading","htmlType","registerForm","RegisterForm","notifyApi","registering","setRegistering","useCallback","status","registerFailed","conflict","emailMessage","MailOutlined","HomePage","loggedIn","user","noThrow","isResourcesDisabled","path"],"mappings":"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","file":"static/js/32.7a363970.chunk.js","sourcesContent":["import styled from 'styled-components';\r\n\r\nexport const ClickableA = styled.a`\r\n  cursor: pointer;\r\n`;\r\n","import React from \"react\";\r\nimport { lang, Localized } from \"src/i18n\"\r\n\r\nconst root = lang.validateMessages;\r\n\r\nexport const required = <Localized id={root.required} />;\r\nexport const number = <Localized id={root.number} />;\r\nexport const integer = <Localized id={root.integer} />;\r\nexport const email = <Localized id={root.email}/>\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/logo-horizontal.ec31d2cc.svg\";","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"@reach/router\";\nimport \"./footer.less\";\nimport logo from \"src/assets/logo-horizontal.svg\";\nimport { lang, Localized } from \"src/i18n\";\n\nexport interface FooterProps {\n  isMobile?: boolean;\n  id?: string;\n}\nconst root = lang.footer;\n\nconst dataSource = [\n  {\n    title: root.contact.title,\n    content: [\n      root.contact.github,\n      root.contact.website,\n      root.contact.linkedin,\n    ],\n    contentLink: [\n      \"https://github.com/ddadaal\",\n      \"https://ddadaal.me\",\n      \"https://linkedin.com/chenjunda\",\n    ],\n  },\n  {\n    title: root.moreProducts.title,\n    content: [\n      root.moreProducts.chainstore,\n      root.moreProducts.chainpaper,\n      root.moreProducts.aplusquant,\n      root.moreProducts.tagx00,\n      root.moreProducts.lightx00,\n    ],\n    contentLink: [\n      \"https://github.com/NJUChainStore/ChainStore\",\n      \"https://github.com/ddadaal/ChainPaper-Frontend\",\n      \"https://github.com/FinTechNJU/FinBrain\",\n      \"https://github.com/trapx00/Tagx00\",\n      \"https://github.com/trapx00/Lightx00\",\n    ],\n  },\n];\n\n\nexport class Footer extends React.Component<FooterProps, {}> {\n\n  static defaultProps = {\n    className: \"footer1\",\n    id: \"footer_1_0\",\n    isMobile: false,\n  };\n\n  getLiChildren = (data: typeof dataSource[0], i: number) => {\n    const links = data.contentLink;\n    const content = data.content\n      .map((item, ii) => {\n        const cItem = <Localized id={item} />;\n        const link = links[ii];\n        return (\n          <li key={ii}>\n            {link.startsWith(\"/\")\n              ? <Link to={link}>{cItem}</Link>\n              : <a href={link} target=\"_blank\" rel=\"noopener noreferrer\">{cItem}</a>\n            }\n          </li>\n        );\n      });\n    return (\n      <li key={i} id={`${this.props.id}-block${i}`}>\n        <h2><Localized id={data.title} /></h2>\n        <ul>\n          {content}\n        </ul>\n      </li>\n    );\n  }\n\n  render() {\n    const props = { ...this.props };\n    delete props.isMobile;\n\n    const liChildrenToRender = dataSource.map(this.getLiChildren);\n    return (\n      <div {...props}>\n\n        <ul>\n          <li key=\"logo\" id={`${props.id}-logo`}>\n            <LogoContainer>\n              <img src={logo} />\n            </LogoContainer>\n            <p><Localized id={root.description}/> </p>\n          </li>\n          {liChildrenToRender}\n        </ul>\n        <p className=\"copyright\">\n          {new Date().getFullYear()} | <Localized id={root.copyright.madeWithLove}/>\n        </p>\n      </div>\n    );\n  }\n}\n\n\nexport const LogoContainer = styled.div`\n  img {\n    width: auto;\n    height: 40px;\n    margin-bottom: 12px;\n  }\n`;\n","import React from \"react\";\r\nimport { Dropdown, Menu } from \"antd\";\r\nimport { I18nStore } from \"src/i18n\";\r\nimport { useStore } from \"simstate\";\r\nimport { allLanguages } from \"src/i18n/definition\";\r\nimport { DownOutlined, GlobalOutlined } from '@ant-design/icons';\r\nimport { ClickableA } from \"src/components/ClickableA\";\r\n\r\nexport function HomepageLanguageSelector() {\r\n\r\n  const { currentLanguage, changeLanguage } = useStore(I18nStore);\r\n\r\n  return (\r\n    <Dropdown trigger={[\"click\", \"hover\"]} overlay={(\r\n      <Menu selectedKeys={[currentLanguage.metadata.id]}>\r\n        {allLanguages\r\n          .filter((x) => x.metadata.id !== currentLanguage.metadata.id)\r\n          .map((x) => (\r\n            <Menu.Item key={x.metadata.id}>\r\n              <ClickableA onClick={() => changeLanguage(x.metadata.id)}>\r\n                {x.metadata.name}\r\n              </ClickableA>\r\n            </Menu.Item>\r\n          ))\r\n        }\r\n      </Menu>)}>\r\n      <ClickableA >\r\n        <GlobalOutlined /> {currentLanguage.metadata.name} <DownOutlined />\r\n      </ClickableA>\r\n    </Dropdown>\r\n  );\r\n\r\n}\r\n\r\n","import React from \"react\";\r\nimport { useLocation } from \"src/utils/useLocation\";\r\nimport { Radio } from \"antd\";\r\nimport { navigate } from \"@reach/router\";\r\nimport { lang, Localized } from \"src/i18n\";\r\nconst root = lang.homepage.pageIndicator;\r\n\r\nexport const PageIndicator: React.FC = () => {\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <Radio.Group value={location.pathname}>\r\n      <Radio.Button onClick={() => navigate(\"/\")} value=\"/\">\r\n        <Localized id={root.login} />\r\n      </Radio.Button>\r\n      <Radio.Button onClick={() => navigate(\"/register\")} value=\"/register\">\r\n        <Localized id={root.register} />\r\n      </Radio.Button>\r\n    </Radio.Group>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { Link } from \"@reach/router\";\r\nimport { HomepageLanguageSelector } from \"src/pages/Home/LanguageSelector\";\r\nimport { Footer } from \"src/components/Footer\";\r\nimport logo from \"src/assets/logo-horizontal.svg\";\r\nimport { Button, Radio } from \"antd\";\r\nimport { PageIndicator } from \"src/pages/Home/PageIndicator\";\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: 100vh;\r\n  overflow: auto;\r\n\r\n  background-image: url('https://gw.alipayobjects.com/zos/rmsportal/TVYTbAXWheQpRcWDaDMu.svg');\r\n  background-position: center 110px;\r\n  background-size: 100%;\r\n`;\r\n\r\nconst Center = styled.div`\r\n  padding: 32px;\r\n\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n`;\r\n\r\nconst RowCenter = styled.div`\r\n  text-align: center;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  a {\r\n    text-decoration: none;\r\n  }\r\n`;\r\n\r\nconst Content = styled.div`\r\n  max-width: 600px;\r\n\r\n  transform: translateY(-10%);\r\n`;\r\n\r\nconst FormSection = styled.div`\r\n  max-width: 400px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  margin-top: 32px;\r\n`;\r\n\r\nexport const HomePageLayout: React.FC = ({ children }) => {\r\n  return (\r\n    <div>\r\n      <Container>\r\n        <Center>\r\n          <Content>\r\n            <Header>\r\n              <Link to=\"/\">\r\n                <img width={\"100%\"} alt=\"logo\" src={logo} />\r\n              </Link>\r\n            </Header>\r\n            <RowCenter>\r\n              <PageIndicator />\r\n            </RowCenter>\r\n            <FormSection>\r\n              {children}\r\n            </FormSection>\r\n            <RowCenter>\r\n              <HomepageLanguageSelector />\r\n            </RowCenter>\r\n          </Content>\r\n        </Center>\r\n      </Container >\r\n      <Footer />\r\n    </div>\r\n  )\r\n};\r\n\r\nexport const FormButton = styled(Button)`\r\n  width: 100%;\r\n`;\r\n","import React from \"react\";\r\nimport { Helmet, HelmetProps } from \"react-helmet\";\r\nimport { useStore } from \"simstate\";\r\nimport { I18nStore } from \"src/i18n\";\r\n\r\ninterface Props extends HelmetProps {\r\n  title?: string;\r\n  titleId?: string;\r\n}\r\n\r\nexport const PageMetadata: React.FC<Props> = ({ title, titleId, ...rest }) => {\r\n\r\n  const i18nStore = useStore(I18nStore);\r\n\r\n  const actualTitle = title ? title : titleId ? i18nStore.translate(titleId) : null;\r\n\r\n  const titleStr = `${actualTitle ? `${actualTitle} | ` : \"\"}AcademyCloud`;\r\n\r\n  return (\r\n    <Helmet\r\n      title={titleStr}\r\n      {...rest}\r\n    />\r\n  )\r\n}\r\n","import { Form, Input, Checkbox, notification } from 'antd';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport React, { useState } from \"react\";\r\nimport { lang, useMultiLocalized, Localized } from \"src/i18n\";\r\nimport styled from \"styled-components\";\r\nimport { useStore } from \"simstate\";\r\nimport { UserStore } from \"src/stores/UserStore\";\r\nimport { getApiService } from \"src/apis\";\r\nimport { AuthenticationService } from \"src/apis/account/AuthenticationService\";\r\nimport { navigate, RouteComponentProps } from \"@reach/router\";\r\nimport { FormButton } from \"src/pages/Home/HomePageLayout\";\r\nimport { PageMetadata } from \"src/utils/PageMetadata\";\r\nimport { required } from \"src/utils/validateMessages\";\r\nimport { AvailableScopesStore } from \"src/stores/AvailableScopesStore\";\r\nimport { isResourcesDisabled } from 'src/models/Scope';\r\n\r\nconst root = lang.homepage.loginForm;\r\n\r\nexport const LoginForm: React.FC<RouteComponentProps> = () => {\r\n\r\n  const userStore = useStore(UserStore);\r\n  const availableScopesStore = useStore(AvailableScopesStore);\r\n\r\n  const [api, contextHolder] = notification.useNotification();\r\n\r\n  const [loggingIn, setLoggingIn] = useState(false);\r\n\r\n  const onFinish = async (values: { [key: string]: any }) => {\r\n    const { username, password } = values;\r\n    try {\r\n      setLoggingIn(true);\r\n      const accountService = getApiService(AuthenticationService);\r\n      const scopesResp = await accountService.getScopes(username, password);\r\n\r\n      // select default; if not, select lastLogin; if not, the first\r\n      const scope = scopesResp.defaultScope ?? scopesResp.lastLoginScope ?? scopesResp.scopes[0];\r\n      const loginResponse = await accountService.login(username, password, scope);\r\n      userStore.login({\r\n        userId: loginResponse.userId,\r\n        username,\r\n        scope,\r\n        token: loginResponse.token,\r\n        remember: values.remember,\r\n        userActive: loginResponse.userActive,\r\n        scopeActive: loginResponse.scopeActive,\r\n      });\r\n      availableScopesStore.setScopes(scopesResp.scopes, values.remember);\r\n    } catch (e) {\r\n      api.error({\r\n        message: <Localized id={root.loginFailTitle} />,\r\n        description: <Localized id={root.other} />,\r\n      });\r\n    } finally {\r\n      setLoggingIn(false);\r\n    }\r\n  };\r\n\r\n  const [username, password] = useMultiLocalized(\r\n    root.username,\r\n    root.password,\r\n  ) as string[];\r\n\r\n  return (\r\n    <Form\r\n      name=\"normal_login\"\r\n      className=\"login-form\"\r\n      initialValues={{ remember: true }}\r\n      onFinish={onFinish}\r\n    >\r\n      {contextHolder}\r\n      <PageMetadata titleId={root.title} />\r\n      <Form.Item\r\n        name=\"username\"\r\n        rules={[{ required: true, message: required }]}\r\n      >\r\n        <Input\r\n          disabled={loggingIn}\r\n          prefix={<UserOutlined className=\"site-form-item-icon\" />}\r\n          placeholder={username} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        name=\"password\"\r\n        rules={[{ required: true, message: required }]}\r\n      >\r\n        <Input\r\n          prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n          type=\"password\"\r\n          disabled={loggingIn}\r\n          placeholder={password}\r\n        />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <Form.Item name=\"remember\" valuePropName=\"checked\" noStyle>\r\n          <Checkbox disabled={loggingIn}><Localized id={root.remember} /></Checkbox>\r\n        </Form.Item>\r\n\r\n        <ForgotLink>\r\n          <Localized id={root.forget} />\r\n        </ForgotLink>\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <FormButton loading={loggingIn} type=\"primary\" htmlType=\"submit\">\r\n          <Localized id={root.login} />\r\n        </FormButton>\r\n      </Form.Item>\r\n    </Form >\r\n  );\r\n}\r\n\r\n\r\nconst ForgotLink = styled.a`\r\n  float: right;\r\n`;\r\n","import React, { useCallback, useState } from \"react\";\r\nimport { RouteComponentProps, navigate } from \"@reach/router\";\r\nimport { Form, Input, notification } from \"antd\";\r\nimport { UserOutlined, LockOutlined, MailOutlined } from \"@ant-design/icons\";\r\nimport { FormButton } from \"src/pages/Home/HomePageLayout\";\r\nimport { lang, Localized, useMultiLocalized } from \"src/i18n\";\r\nimport { AuthenticationService } from \"src/apis/account/AuthenticationService\";\r\nimport { getApiService } from \"src/apis\";\r\nimport { useStore } from \"simstate\";\r\nimport { UserStore } from \"src/stores/UserStore\";\r\nimport { AvailableScopesStore } from \"src/stores/AvailableScopesStore\";\r\nimport { HttpError } from \"src/apis/HttpService\";\r\nimport { PageMetadata } from \"src/utils/PageMetadata\";\r\nimport { required, email as emailMessage } from \"src/utils/validateMessages\";\r\nimport { isResourcesDisabled } from 'src/models/Scope';\r\n\r\nconst root = lang.homepage.registerForm;\r\n\r\nexport const RegisterForm: React.FC<RouteComponentProps> = () => {\r\n\r\n  const userStore = useStore(UserStore);\r\n  const availableScopesStore = useStore(AvailableScopesStore);\r\n  const [notifyApi, contextHolder] = notification.useNotification();\r\n  const [registering, setRegistering] = useState(false);\r\n\r\n  // the origin signature is any\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  const onFinish = useCallback(async (values: { [key: string]: any }) => {\r\n    const { username, password, email } = values;\r\n    setRegistering(true);\r\n\r\n    const api = getApiService(AuthenticationService);\r\n\r\n    try {\r\n      const { scope, token, userId } = await api.register(username, password, email);\r\n      userStore.login({\r\n        userId,\r\n        username,\r\n        scope,\r\n        token,\r\n        remember: true,\r\n        userActive: true,\r\n        scopeActive: true,\r\n      });\r\n      availableScopesStore.setScopes([scope], true);\r\n    } catch (e) {\r\n      const ex = e as HttpError;\r\n      if (ex.status === 403) {\r\n        // conflict\r\n        notifyApi.error({\r\n          message: <Localized id={root.registerFailed} />,\r\n          description: <Localized id={root.conflict} />,\r\n        });\r\n      } else {\r\n        notifyApi.error({\r\n          message: <Localized id={root.registerFailed} />,\r\n          description: <Localized id={root.other} />,\r\n        });\r\n      }\r\n    } finally {\r\n      setRegistering(false);\r\n    }\r\n\r\n  }, []);\r\n\r\n  const [username, password, email] = useMultiLocalized(root.username, root.password, root.email) as string[];\r\n\r\n  return (\r\n    <Form onFinish={onFinish} name=\"register\">\r\n      {contextHolder}\r\n      <PageMetadata titleId={root.title} />\r\n      <Form.Item name=\"username\"\r\n        rules={[{ required: true, message: required }]}>\r\n        <Input disabled={registering} prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder={username} />\r\n      </Form.Item>\r\n      <Form.Item name=\"password\" rules={[{ required: true, message: required }]}>\r\n        <Input type=\"password\" disabled={registering} prefix={<LockOutlined className=\"site-form-item-icon\" />} placeholder={password} />\r\n      </Form.Item>\r\n      <Form.Item name=\"email\" rules={[\r\n        { type: \"email\", message: emailMessage },\r\n        { required: true, message: required }\r\n      ]}>\r\n        <Input prefix={<MailOutlined className=\"site-form-item-icon\" />} placeholder={email} />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <FormButton loading={registering} type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n          <Localized id={root.register} />\r\n        </FormButton>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n}\r\n\r\n","import React from \"react\";\r\nimport { RouteComponentProps, Redirect, Router } from \"@reach/router\";\r\nimport { UserStore } from \"src/stores/UserStore\";\r\nimport { useStore } from \"simstate\";\r\nimport { HomePageLayout } from \"src/pages/Home/HomePageLayout\";\r\nimport { LoginForm } from \"src/pages/Home/Login\";\r\nimport { RegisterForm } from \"src/pages/Home/Register\";\r\nimport { isResourcesDisabled } from \"src/models/Scope\";\r\n\r\nconst HomePage: React.FC<RouteComponentProps> = () => {\r\n  const userStore = useStore(UserStore);\r\n  if (userStore.loggedIn) {\r\n    const { scope } = userStore.user!;\r\n\r\n    return <Redirect noThrow={true} to={isResourcesDisabled(scope) ? \"/expenses\" : \"/resources\"} />;\r\n  }\r\n\r\n  return (\r\n    <HomePageLayout>\r\n      <Router>\r\n        <LoginForm path=\"/\" />\r\n        <RegisterForm path=\"/register\" />\r\n      </Router>\r\n    </HomePageLayout>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n"],"sourceRoot":""}